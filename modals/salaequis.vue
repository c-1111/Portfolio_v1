<template>
  <MModal>
    <div ref="modalRef" class="project_cont">
      <div class="project_top">
        <div class="left">
          <!-- <div class="project_title title_proj">Project Title</div> -->
          <div class="project_bio font_body_md">Identidad gráfica para Sala Equis, icónico espacio madrileño que combina
            bar, cine y actividades culturales. La ubicación históricamente ha sido la sede de un periódico, cine X y su
            reinvención como un punto de encuentro contemporáneo, la identidad busca capturar la esencia multifacética
            del lugar, junto a la idea de adaptación y punto de encuentro. Se busca un mensaje de convergencia de
            personas, estilos y actividades. Esto se traduce de manera directa en un logotipo dinámico, diseñado para
            adaptarse y transformarse según los diferentes usos y eventos del local, reforzando su carácter inclusivo y
            cambiante.</div>
          <a href="https://faux-noticiario.netlify.app/" class="link enlace_manual" target="_blank"><svg
              xmlns="http://www.w3.org/2000/svg" width="23" height="9" fill="none" viewBox="0 0 23 9">
              <path
                d="M15.655 8.656v-2h3a2 2 0 1 0 0-4h-6a2 2 0 0 0-2 2h-2a4 4 0 0 1 4-4h6a4 4 0 1 1 0 8h-3Zm-8-8v2h-3a2 2 0 1 0 0 4h6a2 2 0 0 0 2-2h2a3.999 3.999 0 0 1-4 4H4.656a4 4 0 0 1 0-8h3Z"
                clip-rule="evenodd" />
            </svg>manual de marca</a>
        </div>
        <div class="right">
          <div class="big_logo_holder">
            <svg xmlns="http://www.w3.org/2000/svg" width="674" height="84" fill="none" viewBox="0 0 674 84">
              <g clip-path="url(#a)">
                <path fill="#1D1D1B"
                  d="m45.83 29.979-12.07.387c-.273-3.182-1.74-5.673-4.148-7.05-1.733-.99-4.019-1.522-6.953-1.563-5.253-.076-8.87 2.359-8.87 6.275 0 3.39 2.464 5.535 11.681 7.438 7.915 1.611 12.336 3.57 14.506 4.843 5.179 3.065 7.321 7.257 7.465 12.536a16.103 16.103 0 0 1-1.599 7.827 15.853 15.853 0 0 1-5.15 6.052c-4.291 3.169-10.111 4.435-17.569 4.435-6.584 0-12.65-1.73-16.668-5.265a18.739 18.739 0 0 1-4.702-6.265A18.982 18.982 0 0 1 0 51.959l12.131-.428c.457 2.428.894 5.625 3.671 7.776a13.61 13.61 0 0 0 8.188 2.768c5.943.076 11.053-2.187 11.128-7.023.062-3.653-1.849-6.227-10.63-8.337-6.823-1.653-11.688-2.96-14.745-4.65-4.987-2.767-7.819-6.274-8.003-12.508-.164-5.327 1.89-9.347 6.202-12.564 3.93-2.927 9.02-4.152 15.795-4.152 6.776 0 12.664 1.785 16.58 5.23 3.46 3.052 4.831 6.657 5.513 11.908Zm20.202-17.124H80.02l21.902 58.297H88.207l-4.319-12.454H61.904l-4.21 12.454H44.328l21.704-58.297Zm6.878 11.762c-.15.74-3.446 11.07-3.712 11.762l-2.176 6.503-2.184 6.49h16.3l-4.291-12.8c-.396-.961-3.767-11.346-3.937-11.976v.02Zm29.653-11.782H115.8V60.76h28.268v10.378h-41.505V12.834Zm63.913.02h13.994l21.902 58.297h-13.715l-4.319-12.454h-21.99l-4.21 12.454h-13.367l21.705-58.297Zm6.877 11.762h-.034c-.143.74-3.411 11.07-3.712 11.762l-2.183 6.517-2.177 6.49h16.301l-4.292-12.8c-.362-.975-3.691-11.36-3.903-11.99v.02Zm57.886-11.762h44.398v9.825h-31.161v13.512h28.37v9.644h-28.37v15.27h32.116v10.046h-45.353V12.855Zm108.945 0h13.004v34.912c0 4.206.942 7.479 2.73 9.651 2.005 2.491 5.117 3.674 9.361 3.674 3.978 0 7.082-1.093 9.108-3.542 1.795-2.152 2.846-5.701 2.846-9.88l-.034-34.815h13.025v33.272a36.796 36.796 0 0 1-1.31 10.378 20.397 20.397 0 0 1-4.654 8.4 18.084 18.084 0 0 1-6.823 4.51 31.521 31.521 0 0 1-11.551 1.89 52.138 52.138 0 0 1-7.669-.527 21.77 21.77 0 0 1-6.898-2.075 18.74 18.74 0 0 1-5.459-4.09 19.438 19.438 0 0 1-4.093-7.326 38.24 38.24 0 0 1-1.536-11.174l-.047-33.258Zm56.193 0h13.264v58.297h-13.264V12.855Zm62.95 17.159-12.09.387c-.273-3.183-1.747-5.68-4.155-7.064-1.74-.99-4.033-1.522-6.973-1.564-5.261-.083-8.87 2.367-8.87 6.282 0 3.398 2.47 5.57 11.701 7.452 7.928 1.619 12.357 3.584 14.54 4.843 5.185 3.065 7.328 7.265 7.505 12.557a16.15 16.15 0 0 1-1.606 7.843 15.905 15.905 0 0 1-5.162 6.064c-4.299 3.176-10.126 4.449-17.604 4.449-6.597 0-12.67-1.737-16.702-5.28a18.804 18.804 0 0 1-4.698-6.274 19.068 19.068 0 0 1-1.757-7.673l12.159-.43c.457 2.443.894 5.64 3.684 7.798a13.678 13.678 0 0 0 8.188 2.768c5.956.076 11.074-2.194 11.149-7.044.061-3.653-1.849-6.226-10.651-8.35-6.823-1.654-11.715-2.969-14.779-4.657-4.994-2.767-7.833-6.289-8.017-12.536-.164-5.335 1.897-9.368 6.216-12.593 3.937-2.926 9.04-4.15 15.822-4.15 6.899 0 12.698 1.791 16.621 5.244 3.426 3.05 4.797 6.662 5.479 11.928ZM334.969 68.246l-8.099-5.383.362-.283c4.885-5.245 7.014-13.146 7.014-20.999 0-8.302-2.245-15.082-7.158-20.465-5.117-5.604-12.117-8.261-20.585-8.261-8.269 0-14.833 2.4-19.923 7.61-5.09 5.21-7.737 12.24-7.737 20.916 0 9.243 2.613 16.605 7.621 21.89 5.008 5.287 11.599 7.666 20.114 7.777a29.006 29.006 0 0 0 13.524-3.079l10.507 6.988 4.36-6.71Zm-26.159-7.21c-.757.137-1.524.206-2.293.208-5.165 0-9.477-2.29-12.015-6.648-1.986-3.418-2.914-7.666-2.914-12.98 0-5.113.839-8.994 2.92-12.336a13.491 13.491 0 0 1 5.035-4.869 13.256 13.256 0 0 1 6.762-1.655c4.729 0 8.393 1.598 11.115 4.981 4.094 5.134 4.149 11.693 4.135 13.879a27.269 27.269 0 0 1-3.623 13.256c-.29.484-.614.947-.969 1.384l-8.583-5.68-4.36 6.745 5.397 3.584c-.205.049-.396.097-.607.132Zm254.663-21.682a18.208 18.208 0 0 1 3.863-11.215 17.772 17.772 0 0 1 9.899-6.352L549.943 0h-32.137l34.969 26.644-62.97-13.837V27.44l71.43 14.757-71.43 14.398v14.64l53.902-11.762-25.928 24.5h32.143l26.883-27.378a17.402 17.402 0 0 1-9.621-6.271 17.823 17.823 0 0 1-3.711-10.97ZM674 12.8l-66.408 17.712L645.992 0h-32.103L586.85 21.835a18.322 18.322 0 0 1 8.873 6.781 18.727 18.727 0 0 1 3.367 10.738c.04 3.76-1.074 7.44-3.189 10.53a17.904 17.904 0 0 1-8.615 6.711L613.896 84h32.103l-29.544-28.221 57.552 15.456v-14.64L615.015 42.19l58.992-14.757L674 12.8Z" />
              </g>
              <defs>
                <clipPath id="a">
                  <path fill="#fff" d="M0 0h674v84H0z" />
                </clipPath>
              </defs>
            </svg>
          </div>
        </div>
      </div>

      <div class="project_media">

        <div class="image_gallery">
          <img v-for="(image, index) in imageUrls" :key="index" :src="image" :alt="'Image ' + (index + 1)"
            class="gallery_img_small" @click="openLightbox(index)" />
        </div>

        <!-- Lightbox Modal -->
        <div v-if="isLightboxOpen" class="lightbox" @click="closeLightbox">
          <div class="lightbox-content" @click.stop>
            <img :src="imageUrls[selectedImage]" :alt="'Lightbox Image ' + (selectedImage + 1)" />
            <!-- <button class="close-btn" @click="closeLightbox">×</button> -->
          </div>
        </div>

        <div class="logo_vertical_holder">
          <svg xmlns="http://www.w3.org/2000/svg" width="199" height="130" fill="none" viewBox="0 0 199 130">
            <path fill="#000"
              d="M79.22 41.748a19.15 19.15 0 0 1 4.15-11.898 19.126 19.126 0 0 1 10.643-6.737L64.675 0H30.13l37.589 28.265L.022 13.585v15.531l76.77 15.634L0 60.038V75.57l57.942-12.477-27.87 25.99h34.515L93.47 60.008a18.724 18.724 0 0 1-10.284-6.662 18.747 18.747 0 0 1-3.967-11.599Zm118.803-28.177-71.357 18.782L167.952 0h-34.538l-29.066 23.157c7.635 2.517 13.15 10.106 13.15 18.591a19.238 19.238 0 0 1-3.427 11.168 19.218 19.218 0 0 1-9.254 7.122l28.604 29.073h34.509l-31.766-29.939L198.03 75.57V60.04l-63.406-15.29 63.406-15.647-.007-15.531Z" />
            <path fill="#1D1D1B"
              d="m18.982 111.563-4.987.161a3.5 3.5 0 0 0-1.717-2.877 5.985 5.985 0 0 0-2.875-.639c-2.2-.036-3.667.962-3.667 2.562 0 1.38 1.02 2.268 4.826 3.031a20.296 20.296 0 0 1 6.007 1.982 5.706 5.706 0 0 1 3.088 5.138 6.518 6.518 0 0 1-2.795 5.666c-1.775 1.292-4.18 1.813-7.268 1.813-2.729 0-5.237-.734-6.894-2.151a7.657 7.657 0 0 1-2.663-5.681l5.017-.176c.19.991.367 2.298 1.518 3.171a5.705 5.705 0 0 0 3.389 1.123c2.457 0 4.569-.896 4.606-2.87 0-1.468-.734-2.547-4.401-3.406-2.816-.675-4.833-1.211-6.102-1.893-2.061-1.123-3.235-2.569-3.308-5.138a5.756 5.756 0 0 1 2.567-5.138c1.62-1.196 3.733-1.68 6.535-1.68s5.237.734 6.858 2.135c1.4 1.255 1.987 2.723 2.266 4.867Zm8.361-6.988h5.787l9.066 23.803h-5.677l-1.79-5.087h-9.094l-1.739 5.087h-5.53l8.977-23.803Zm2.846 4.793c-.058.301-1.423 4.514-1.533 4.807l-.916 2.665-.902 2.649h6.74l-1.775-5.225c-.147-.36-1.54-4.639-1.614-4.896Zm12.953-4.8h5.471v19.56h11.699v4.25h-17.17v-23.81Zm27.093.007h5.823l9.058 23.803h-5.67l-1.789-5.087h-9.095l-1.745 5.087h-5.523l8.94-23.803Zm2.845 4.793c-.066.301-1.43 4.514-1.54 4.807l-.917 2.665-.895 2.649h6.74l-1.774-5.225c-.154-.36-1.57-4.639-1.614-4.896Zm27.534-4.77h18.336v4.007h-12.864v5.512h11.735v3.942h-11.735v6.238h13.282v4.096h-18.754v-23.795Zm46.72-.03h5.383v14.254a6.111 6.111 0 0 0 1.123 3.941c.828 1.013 2.119 1.468 3.872 1.468 1.753 0 2.934-.44 3.77-1.468a6.357 6.357 0 0 0 1.174-4.029v-14.217h5.39v13.585a14.91 14.91 0 0 1-.542 4.228 8.383 8.383 0 0 1-1.922 3.428 7.538 7.538 0 0 1-2.831 1.842c-1.531.549-3.149.81-4.775.77a21.105 21.105 0 0 1-3.176-.22 9.113 9.113 0 0 1-2.853-.844 7.632 7.632 0 0 1-3.96-4.66 15.51 15.51 0 0 1-.638-4.566l-.015-13.512Zm23.126 0h5.479v23.802h-5.479v-23.802Zm26.895 7.009-5.002.154a3.505 3.505 0 0 0-1.716-2.884 6.1 6.1 0 0 0-2.882-.639c-2.201 0-3.667.969-3.667 2.569 0 1.387 1.019 2.276 4.84 3.039a20.366 20.366 0 0 1 6.014 1.982 5.735 5.735 0 0 1 3.096 5.137 6.523 6.523 0 0 1-2.802 5.674c-1.775 1.299-4.188 1.82-7.283 1.82-2.729 0-5.244-.734-6.909-2.158a7.695 7.695 0 0 1-2.67-5.695l5.031-.169c.191.991.367 2.297 1.519 3.178a5.741 5.741 0 0 0 3.403 1.123c2.457 0 4.577-.896 4.606-2.877 0-1.468-.734-2.554-4.401-3.413-2.824-.675-4.841-1.211-6.109-1.901-2.069-1.123-3.242-2.569-3.316-5.138a5.774 5.774 0 0 1 2.568-5.138c1.628-1.196 3.74-1.688 6.549-1.688s5.252.734 6.872 2.143c1.409 1.255 1.981 2.731 2.259 4.881Zm-52.354 15.671-3.351-2.202.146-.118c2.025-2.143 2.934-5.365 2.934-8.58 0-3.376-.931-6.15-2.934-8.352-2.002-2.202-5.016-3.369-8.522-3.369-3.506 0-6.132.983-8.237 3.119-2.105 2.136-3.205 4.999-3.205 8.536 0 3.78 1.086 6.79 3.154 8.94 2.068 2.151 4.811 3.134 8.317 3.171a12.187 12.187 0 0 0 5.604-1.255l4.342 2.855 1.752-2.745Zm-10.825-2.936a5.56 5.56 0 0 1-.946.081 5.495 5.495 0 0 1-4.966-2.716 10.222 10.222 0 0 1-1.21-5.292 9.071 9.071 0 0 1 1.21-5.042 5.993 5.993 0 0 1 4.583-2.654 5.975 5.975 0 0 1 4.893 2.023 8.898 8.898 0 0 1 1.709 5.673 10.943 10.943 0 0 1-1.467 5.409 6.705 6.705 0 0 1-.403.573L134 120.033l-1.804 2.752 2.237 1.468-.257.059Z" />
          </svg>

        </div>

      </div>

      <div class="svg_container">
        <div class="svg_cont2" v-html="currentSvg"></div>
      </div>
      <div class="text_mobile hidden">
        <div class="project_title bg-white title_proj">SALA EQUIS <input type="checkbox" checked class="mobile_title_checkbox cursor-pointer hidden" @click="openMobileText">
        </div>
        <div class="text_holder font_body_md" v-show="isVisible">
          <span class="">Identidad gráfica para Sala Equis, icónico espacio madrileño que combina
            bar, cine y actividades culturales. La ubicación históricamente ha sido la sede de un periódico, cine X y su
            reinvención como un punto de encuentro contemporáneo, la identidad busca capturar la esencia multifacética
            del lugar, junto a la idea de adaptación y punto de encuentro. Se busca un mensaje de convergencia de
            personas, estilos y actividades. Esto se traduce de manera directa en un logotipo dinámico, diseñado para
            adaptarse y transformarse según los diferentes usos y eventos del local, reforzando su carácter inclusivo y
            cambiante.</span>
          <span class="annotation"></span>
        </div>
      </div>
    </div>
    
    <Exit_button @click="handleCloseClick" />
  </MModal>
</template>


<style scoped lang="sass">

.project_top
  display: flex
  justify-content: space-between
  .left
    .project_bio
      max-width:60ch
  .right
    display: flex
    flex-direction: column
    justify-content: space-between
</style>



<script setup>
import { dirname } from "pathe";
import { ref } from 'vue';
import { onMounted, onBeforeUnmount } from 'vue';

// Lista de SVGs que quieres mostrar
const svgList = [
  `<svg xmlns="http://www.w3.org/2000/svg" width="468" height="287" fill="none" viewBox="0 0 468 287">
  <path stroke="#575756" stroke-miterlimit="10" stroke-width=".05" d="M.15 112.09h467.77M.08 154.24h467.84M0 72.44h467.93M.08 193.84h467.84M.15 90.93h467.77M.08 175.39h467.84M101.65 0v286.95M371.61 0v259.83M142.7 0v259.83M189.76 0v259.83M283.52 0v259.83M330.57 0v259.83M307.05 0v259.83"/>
  <path fill="#000" d="M209.63 129.32a26.094 26.094 0 0 1 20.18-25.4l-40.05-52.64H142.7l51.26 59.66-92.29-20v21.15l104.69 21.33-147 20.83v21.15l121.35-17-38 35.41h47.07l39.38-39.6a25.545 25.545 0 0 1-19.53-24.89Zm183.14-38.39-118.48 25.58 56.29-44.08h-47L243.89 104a26.811 26.811 0 0 1 17.94 25.33 26.226 26.226 0 0 1-17.29 24.92l62.51 82.1h47l-66.83-83.29 84.35 22.34v-21.16l-86.41-20.83 107.61-21.33V90.93Z"/>
  <path fill="#878787" d="M375.82 193.84h-4.21v21.15h4.21v-21.15Zm-295.32 0v4.21h21.15v-4.21H80.5Zm21.15-142.56h-4.21v21.15h4.21V51.28Zm269.96 16.94v4.21h21.15v-4.21h-21.15Z"/>
  <path fill="#9D9D9C" d="M375.82 214.99h-4.21v21.15h4.21v-21.15ZM80.49 198.05v-4.21H59.34v4.21h21.15Z"/>
</svg>`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="468" height="260" fill="none" viewBox="0 0 468 260">
  <path stroke="#575756" stroke-miterlimit="10" stroke-width=".05" d="M.15 112.08h467.78M.09 154.24h467.84M0 72.44h467.93M.09 193.84h467.84M.15 90.93h467.78M.09 175.39h467.84M101.71 0v259.83M371.66 0v259.83M142.75 0v259.83M189.81 0v259.83M283.57 0v259.83M330.62 0v259.83M307.1 0v259.83"/>
  <path fill="#000" d="M209.71 129.32a26.089 26.089 0 0 1 20.17-25.4l-40-31.49h-47.06l51.25 38.51-134.61-20v21.15l147 21.33-104.75 20.82v21.15l79-17-38 35.41h47.06l39.38-39.6a25.548 25.548 0 0 1-19.44-24.88Zm162-38.39-97.33 25.58 56.29-65.23h-47.05L243.95 104c10.41 3.43 17.93 13.77 17.93 25.33a26.2 26.2 0 0 1-17.29 24.92L284.28 215h47l-44-61.94 84.43 22.33v-21.15l-86.45-20.83 86.45-21.33V90.93Z"/>
  <path fill="#878787" d="M375.88 51.28h-4.21v21.15h4.21V51.28Zm0 142.56h-4.21v21.15h4.21v-21.15ZM80.56 68.23v4.21h21.15v-4.21H80.56Z"/>
  <path fill="#9D9D9C" d="M59.4 68.22v4.21h21.15v-4.21H59.4Z"/>
</svg>`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="468" height="260" fill="none" viewBox="0 0 468 260">
  <path stroke="#575756" stroke-miterlimit="10" stroke-width=".05" d="M.15 112.08h467.77M.08 154.24h467.84M0 72.44h467.93M.08 193.84h467.84M.15 90.93h467.77M.08 175.39h467.84M101.71 0v259.83M371.67 0v259.83M142.76 0v259.83M283.58 0v259.83M330.63 0v259.83M307.109 0v259.83M166.31 0v259.83"/>
  <path fill="#000" d="M209.69 129.32a26.08 26.08 0 0 1 20.17-25.4l-64.08-73.79h-47.06L194 110.94l-113.46-20v21.15l125.86 21.33-104.69 20.83v21.15l79-17-38 56.56h47.06l39.38-60.75a25.543 25.543 0 0 1-19.46-24.89Zm204.129-38.39-139.48 25.58 56.29-44.08h-47L243.939 104a26.809 26.809 0 0 1 17.94 25.32 26.195 26.195 0 0 1-17.29 24.92l39 39.6h47l-43.31-40.79 105.6 22.34v-21.15l-107.62-20.83 128.61-21.33-.05-21.15Z"/>
  <path fill="#878787" d="M101.69 51.28h-4.21v21.15h4.21V51.28Zm0 142.56h-4.21v21.15h4.21v-21.15Zm291.23-121.4v-4.21h-21.15v4.21h21.15Zm-.1 125.61v-4.21h-21.15v4.21h21.15Z"/>
  <path fill="#878787" d="M101.7 72.43v-4.21H80.55v4.21h21.15Z"/>
  <path fill="#9D9D9C" d="M101.69 30.13h-4.21v21.15h4.21V30.13Zm312.22 42.3v-4.21h-21.15v4.21h21.15Z"/>
</svg>
`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="468" height="260" fill="none" viewBox="0 0 468 260">
  <path stroke="#575756" stroke-miterlimit="10" stroke-width=".05" d="M.14 112.08h467.78M.08 154.24h467.84M0 72.44h467.92M.08 193.84h467.84M.14 90.93h467.78M.08 175.39h467.84M101.71 0v259.83M371.67 0v259.83M142.75 0v259.83M283.569 0v259.83M330.619 0v259.83M307.1 0v259.83M166.31 0v259.83M189.31 0v259.83"/>
  <path fill="#000" d="M209.68 129.32a26.087 26.087 0 0 1 20.17-25.4l-40.54-52.64h-47.06L194 110.94l-114-20v21.15l126.37 21.33-104.66 20.82v21.15l79-17-61.53 77.72h47.13l62.9-81.91a25.555 25.555 0 0 1-19.53-24.88Zm181.19-38.39-116.56 25.58 56.29-44.08h-47L243.939 104c10.41 3.43 17.931 13.77 17.931 25.33a26.203 26.203 0 0 1-17.29 24.92l39 60.75h47l-43.27-61.95 126.649 23.4v-21.16l-128.75-21.88 105.661-21.33V90.93Z"/>
  <path fill="#878787" d="M97.5 72.43h4.21V51.28H97.5v21.15Zm274.16-4.21v4.21h21.15v-4.21h-21.15Z"/>
  <path fill="#706F6F" d="M392.819 193.84v4.21h21.15v-4.21h-21.15Z"/>
  <path fill="#878787" d="M371.659 193.83v4.21h21.15v-4.21h-21.15ZM80.55 68.22v4.21h21.15v-4.21H80.55ZM97.5 214.99h4.21v-21.15H97.5v21.15Z"/>
  <path fill="#9D9D9C" d="M97.5 236.15h4.21V215H97.5v21.15Z"/>
</svg>
`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="468" height="261" fill="none" viewBox="0 0 468 261">
  <path stroke="#575756" stroke-miterlimit="10" stroke-width=".05" d="M.06 112.18h467.78M0 154.33h467.84M.02 72.53h467.82M0 193.93h467.84M.06 91.02h467.78M0 175.49h467.84M101.67 0v260.02M371.63 0v259.64M142.71 0v259.64M189.77 0v259.64M283.53 0v259.64M330.58 0v259.64M166.24 0v260.02"/>
  <path fill="#000" d="M209.65 129.32a26.089 26.089 0 0 1 20.17-25.4l-40-31.49h-47.1l51.3 38.51-113.5-20.01v21.15l125.85 21.33-104.69 20.83v21.15l79-17-61.54 77.91h47.06l62.93-82.1a25.539 25.539 0 0 1-19.48-24.88Zm161.98-38.39-97.33 25.58 56.29-44.08h-47.05L243.91 104c10.41 3.43 17.93 13.77 17.93 25.33a26.203 26.203 0 0 1-17.29 24.92l39 39.6h47.05l-43.3-40.79 126.65 22.34v-21.16l-128.77-20.83 86.45-21.33V90.93Z"/>
  <path fill="#878787" d="M101.67 193.84h-4.21v21.15h4.21v-21.15Z"/>
  <path fill="#9D9D9C" d="M101.67 214.99h-4.21v21.15h4.21v-21.15Z"/>
  <path fill="#878787" d="M371.63 193.84v4.21h21.15v-4.21h-21.15ZM80.51 68.23v4.21h21.15v-4.21H80.51Z"/>
  <path fill="#9D9D9C" d="M392.78 193.85v4.21h21.15v-4.21h-21.15Z"/>
</svg>
`];

// El índice del SVG que estamos mostrando
const currentIndex = ref(0);

// SVG actual que se muestra
const currentSvg = ref(svgList[currentIndex.value]);

// Cambiar al siguiente SVG cada 3 segundos
const changeSvg = () => {
  currentIndex.value = (currentIndex.value + 1) % svgList.length;
  currentSvg.value = svgList[currentIndex.value];
};

// Configurar un temporizador al montar el componente
let intervalId = null;
onMounted(() => {
  intervalId = setInterval(changeSvg, 1000); // Cambiar cada 3 segundos
});

// Limpiar el temporizador al desmontar el componente
onBeforeUnmount(() => {
  clearInterval(intervalId);
});

const imageUrls = ref([
  '/img/SALAEQUIS/cartel_1.webp',
  '/img/SALAEQUIS/cartel_3.webp',
  '/img/SALAEQUIS/cartel_2.webp',
  '/img/SALAEQUIS/signage_1.webp',
  '/img/SALAEQUIS/signage_3.webp',
  '/img/SALAEQUIS/papeleria_2.webp',
  '/img/SALAEQUIS/papeleria_1.webp',
  '/img/SALAEQUIS/posavaso_1.webp',
  '/img/SALAEQUIS/posavaso_2.webp',
  '/img/SALAEQUIS/programa_1.webp',
]);


// Lógica para el lightbox
const isLightboxOpen = ref(false);
const selectedImage = ref(null);

const openLightbox = (index) => {
  selectedImage.value = index;
  isLightboxOpen.value = true;
};

const closeLightbox = () => {
  isLightboxOpen.value = false;
};

// Referencia para el modal
const modalRef = ref(null);

// Obtener el router
const router = useRouter();

// Función para manejar el cierre del modal
const handleCloseClick = () => {
  navigateTo(dirname(router.currentRoute.value.path));
};

// Agregar eventos para cerrar el modal al hacer clic afuera o presionar la tecla Escape
onClickOutside(modalRef, handleCloseClick);
onKeyStroke("Escape", handleCloseClick);

// Navegar a la imagen anterior o siguiente
const navigateImage = (direction) => {
  if (!isLightboxOpen.value) return; // Asegurarse de que el lightbox esté abierto
  const newIndex = selectedImage.value + direction;
  if (newIndex >= 0 && newIndex < imageUrls.value.length) {
    selectedImage.value = newIndex;
  }
};

// Detectar la tecla presionada (flechas izquierda y derecha)
const handleKeydown = (event) => {
  if (!isLightboxOpen.value) return; // Asegurarse de que el lightbox esté abierto
  if (event.key === 'ArrowRight') {
    navigateImage(1); // Flecha derecha (adelante)
  } else if (event.key === 'ArrowLeft') {
    navigateImage(-1); // Flecha izquierda (atrás)
  }
};

// Añadir un "escuchador" de teclas al montar el componente
onMounted(() => {
  window.addEventListener('keydown', handleKeydown);
});

// Limpiar el "escuchador" de teclas cuando el componente se desmonte
onBeforeUnmount(() => {
  window.removeEventListener('keydown', handleKeydown);
});

const isVisible = ref(true);
const openMobileText = () => { isVisible.value = !isVisible.value; }

</script>

<style scoped lang="sass">
.project_top
  display: flex
  justify-content: space-between
  align-items: center
  .left
    .project_bio
        min-width: 50ch
        max-width: 70ch
    .enlace_manual
      display: flex
      align-items: center
      gap: .2rem
      padding-top: 2rem
      &:hover
        color: #ff5e00
        svg
          fill: #ff5e00
      svg
        fill: black
  .right
    .big_logo_holder
      padding-right: 10%
      svg
        width: 45vw

.project_media
  display: flex
  justify-content: space-between
  align-items: center
  padding-top: 2rem

  .image_gallery
    display: flex
    gap: 5px
    flex-wrap: wrap
    max-width: 50%
    
    .gallery_img_small
      height: 12vh
      width: 8vw
      object-fit: cover
      cursor: pointer
      // box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.1)
      // transition: box-shadow 0.3s ease // Suaviza el cambio
      // &:hover 
      //   box-shadow: 0px 3px 7px rgba(0, 0, 0, 0.15) // Sombra más intensa en hover
  .lightbox
    position: fixed
    top: 0
    left: 0
    right: 3%
    bottom: 0
    background: rgba(255, 255, 255, 0.5)
    display: flex
    justify-content: flex-end
    align-items: center
    z-index: 1000

  .lightbox-content
    position: relative
    display: flex
    justify-content: center
    align-items: center
    max-width: 50vw
    max-height: 50vh
    width: auto
    height: auto
    object-fit: cover

  

  .logo_vertical_holder
    svg
      width: 20vw
.svg_container
  padding-top: 2rem
  left: -2rem
  position: fixed

@media (max-width: 640px)
  .project_cont
    overflow-y: auto
    height: 100% // Asegura que ocupe toda la altura del viewport 
    align-items: center
    // overflow-x: hidden
    width: 100%
    .project_top
      flex-direction: column
      width: 100%
      .left
        display: none
        .enlace_manual
          &:hover
            svg
      .right
        width: 100%
        .big_logo_holder
          padding-right: 0
          width: 100%
          svg
            width: 100%

    .project_media
      display: flex
      flex-direction: column-reverse
      width: 100%
      overflow-y: auto
      padding-top: 0
      .image_gallery
        max-width: 100%
        .gallery_img_small
          flex-grow: 3
          min-width: 15vw
          // width: 25vw
      .lightbox
        margin-inline: 2.5vw
        position: fixed
        top: 0
        left: 0
        right: 0
        bottom: 0
        background: rgba(255, 255, 255, 0.5)
        display: flex
        justify-content: flex-end
        z-index: 1000
      .lightbox-content
        max-width: 80vw
        max-height: 90vh
        width: auto
        height: auto
      .logo_vertical_holder
        width: 100%
        padding-bottom: 1rem
        padding-top: 1rem
        svg
          width: 50%

    .svg_container
      align-items: center
      position: relative
      padding-left: 0
      position: static
      width: 100%
      // padding-bottom: 10rem
      .svg_cont2
        align-items: center
        display: flex
        justify-content: center
        width: 100%
    .text_mobile
      display: block
      width: 100%
      position: fixed
      bottom: -.1rem
      .project_title
        display: flex
        gap: .5rem
        align-items: center
        background: white
        width: fit-content
        padding-right: 1rem
        .mobile_title_checkbox
          display: block
          transform: scale(1.5)
          background: white
      .text_holder
        margin-right: 5vw
        background: white
        padding-bottom: 2vh  

</style>